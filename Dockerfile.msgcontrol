FROM golang:1.24-alpine3.21 AS build
WORKDIR /build
COPY . .
RUN go build -o ./broker cmd/msgcontrol/main.go

FROM alpine:3.21
WORKDIR /app
COPY --from=build /build/broker . 
CMD ["/app/broker"]